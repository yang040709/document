import{_ as n,c as a,o as i,ah as e}from"./chunks/framework.CitoaWpm.js";const k=JSON.parse('{"title":"1.åŸºç¡€","description":"","frontmatter":{},"headers":[],"relativePath":"vue3/index.md","filePath":"vue3/index.md","lastUpdated":1758365489000}'),p={name:"vue3/index.md"};function l(r,s,t,h,c,d){return i(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="_1-åŸºç¡€" tabindex="-1">1.åŸºç¡€ <a class="header-anchor" href="#_1-åŸºç¡€" aria-label="Permalink to â€œ1.åŸºç¡€â€">â€‹</a></h1><h2 id="_1-ä¸¤ä¸ª-vue-ç‰ˆæœ¬çš„åŒºåˆ«" tabindex="-1">1.ä¸¤ä¸ª vue ç‰ˆæœ¬çš„åŒºåˆ« <a class="header-anchor" href="#_1-ä¸¤ä¸ª-vue-ç‰ˆæœ¬çš„åŒºåˆ«" aria-label="Permalink to â€œ1.ä¸¤ä¸ª vue ç‰ˆæœ¬çš„åŒºåˆ«â€">â€‹</a></h2><p>å½“æ ¹ç»„ä»¶æ²¡æœ‰è®¾ç½® template é€‰é¡¹æ—¶ï¼ŒVue å°†è‡ªåŠ¨ä½¿ç”¨å®¹å™¨çš„ innerHTML ä½œä¸ºæ¨¡æ¿ã€‚</p><p>ä¸€ä¸ªç‰ˆæœ¬çš„ vue æ˜¯åŒ…å«æ¨¡æ¿ç¼–è¯‘å™¨çš„ï¼Œå¦ä¸€ä¸ªç‰ˆæœ¬å°±æ²¡æœ‰ã€‚</p><p>åœ¨ä½¿ç”¨æ„å»ºå·¥å…·è¿›è¡Œç¼–ç¨‹çš„è¿‡ç¨‹ä¸­æ„å»ºå·¥å…·ä¼šå¸®ä½ å¤„ç†æ¨¡æ¿ï¼Œåœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­ä¸éœ€è¦æ¨¡æ¿ç¼–è¯‘å™¨ã€‚</p><p>ä¸‹é¢æ˜¯åœ¨ html ç›´æ¥å†™ vue ä»£ç ï¼Œéœ€è¦ä½¿ç”¨å¸¦æœ‰æ¨¡æ¿ç¼–è¯‘å™¨ç‰ˆæœ¬çš„ vue</p><p>æ ¹ç»„ä»¶çš„æ¨¡æ¿é€šå¸¸æ˜¯ç»„ä»¶æœ¬èº«çš„ä¸€éƒ¨åˆ†ï¼Œä½†ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡åœ¨æŒ‚è½½å®¹å™¨å†…ç¼–å†™æ¨¡æ¿æ¥å•ç‹¬æä¾›ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;div id=&quot;app&quot;&gt;</span></span>
<span class="line"><span>  &lt;button @click=&quot;count++&quot;&gt;{{ count }}&lt;/button&gt;</span></span>
<span class="line"><span>&lt;/div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>js</span></span>
<span class="line"><span>import { createApp } from &#39;vue&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const app = createApp({</span></span>
<span class="line"><span>  data() {</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      count: 0</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>})</span></span>
<span class="line"><span></span></span>
<span class="line"><span>app.mount(&#39;#app&#39;)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>å½“ä»¥æ— æ„å»ºæ­¥éª¤æ–¹å¼ä½¿ç”¨ Vue æ—¶ï¼Œç»„ä»¶æ¨¡æ¿è¦ä¹ˆæ˜¯å†™åœ¨é¡µé¢çš„ HTML ä¸­ï¼Œè¦ä¹ˆæ˜¯å†…è”çš„ JavaScript å­—ç¬¦ä¸²ã€‚åœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œä¸ºäº†æ‰§è¡ŒåŠ¨æ€æ¨¡æ¿ç¼–è¯‘ï¼ŒVue éœ€è¦å°†æ¨¡æ¿ç¼–è¯‘å™¨è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ã€‚ç›¸å¯¹çš„ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†æ„å»ºæ­¥éª¤ï¼Œç”±äºæå‰ç¼–è¯‘äº†æ¨¡æ¿ï¼Œé‚£ä¹ˆå°±æ— é¡»å†åœ¨æµè§ˆå™¨ä¸­è¿è¡Œäº†ã€‚ä¸ºäº†å‡å°æ‰“åŒ…å‡ºçš„å®¢æˆ·ç«¯ä»£ç ä½“ç§¯ï¼ŒVue æä¾›äº†<a href="https://unpkg.com/browse/vue@3/dist/" target="_blank" rel="noreferrer">å¤šç§æ ¼å¼çš„â€œæ„å»ºæ–‡ä»¶â€</a>ä»¥é€‚é…ä¸åŒåœºæ™¯ä¸‹çš„ä¼˜åŒ–éœ€æ±‚ã€‚</p><ul><li>å‰ç¼€ä¸º <code>vue.runtime.*</code> çš„æ–‡ä»¶æ˜¯<strong>åªåŒ…å«è¿è¡Œæ—¶çš„ç‰ˆæœ¬</strong>ï¼šä¸åŒ…å«ç¼–è¯‘å™¨ï¼Œå½“ä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬æ—¶ï¼Œæ‰€æœ‰çš„æ¨¡æ¿éƒ½å¿…é¡»ç”±æ„å»ºæ­¥éª¤é¢„å…ˆç¼–è¯‘ã€‚</li><li>åç§°ä¸­ä¸åŒ…å« <code>.runtime</code> çš„æ–‡ä»¶åˆ™æ˜¯<strong>å®Œå…¨ç‰ˆ</strong>ï¼šå³åŒ…å«äº†ç¼–è¯‘å™¨ï¼Œå¹¶æ”¯æŒåœ¨æµè§ˆå™¨ä¸­ç›´æ¥ç¼–è¯‘æ¨¡æ¿ã€‚ç„¶è€Œï¼Œä½“ç§¯ä¹Ÿä¼šå› æ­¤å¢é•¿å¤§çº¦ 14kbã€‚</li></ul><p>é»˜è®¤çš„å·¥å…·é“¾ä¸­éƒ½ä¼šä½¿ç”¨ä»…å«è¿è¡Œæ—¶çš„ç‰ˆæœ¬ï¼Œå› ä¸ºæ‰€æœ‰å•æ–‡ä»¶ç»„ä»¶ä¸­çš„æ¨¡æ¿éƒ½å·²ç»è¢«é¢„ç¼–è¯‘äº†ã€‚å¦‚æœå› ä¸ºæŸäº›åŸå› ï¼Œåœ¨æœ‰æ„å»ºæ­¥éª¤æ—¶ï¼Œä½ ä»éœ€è¦æµè§ˆå™¨å†…çš„æ¨¡æ¿ç¼–è¯‘ï¼Œä½ å¯ä»¥æ›´æ”¹æ„å»ºå·¥å…·é…ç½®ï¼Œå°† <code>vue</code> æ”¹ä¸ºç›¸åº”çš„ç‰ˆæœ¬ <code>vue/dist/vue.esm-bundler.js</code>ã€‚</p><p>å¦‚æœä½ éœ€è¦ä¸€ç§æ›´è½»é‡çº§ï¼Œä¸ä¾èµ–æ„å»ºæ­¥éª¤çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä¹Ÿå¯ä»¥çœ‹çœ‹ <a href="https://github.com/vuejs/petite-vue" target="_blank" rel="noreferrer">petite-vue</a>ã€‚</p><h2 id="_2-vue-çš„å…¨å±€é”™è¯¯æ•è·" tabindex="-1">2.vue çš„å…¨å±€é”™è¯¯æ•è· <a class="header-anchor" href="#_2-vue-çš„å…¨å±€é”™è¯¯æ•è·" aria-label="Permalink to â€œ2.vue çš„å…¨å±€é”™è¯¯æ•è·â€">â€‹</a></h2><p>Vue 3 çš„ <code>app.config.errorHandler</code> ğŸ›¡ï¸ æ˜¯é¡¹ç›®ä¸­<strong>éå¸¸é‡è¦ä¸”å¸¸ç”¨</strong>çš„å…¨å±€é”™è¯¯å¤„ç†æœºåˆ¶ã€‚å®ƒä¸»è¦ç”¨äºæ•è·å’Œå¤„ç† Vue åº”ç”¨å†…<strong>æœªæ•è·çš„è¿è¡Œæ—¶é”™è¯¯</strong>ï¼Œæ˜¯æå‡åº”ç”¨å¥å£®æ€§å’Œç”¨æˆ·ä½“éªŒçš„å…³é”®ä¸€ç¯ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªè¡¨æ ¼ï¼Œæ±‡æ€»äº† <code>app.config.errorHandler</code> åœ¨é¡¹ç›®ä¸åŒé˜¶æ®µçš„æ ¸å¿ƒç”¨é€”ï¼š</p><table tabindex="0"><thead><tr><th style="text-align:left;">é˜¶æ®µ</th><th style="text-align:left;">ä¸»è¦ç›®æ ‡</th><th style="text-align:left;">æ ¸å¿ƒåº”ç”¨</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>å¼€å‘é˜¶æ®µ</strong></td><td style="text-align:left;"><strong>è°ƒè¯•ä¸å®šä½</strong></td><td style="text-align:left;">åœ¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼Œå¸®åŠ©å¿«é€Ÿå®šä½å’Œä¿®å¤é—®é¢˜ã€‚</td></tr><tr><td style="text-align:left;"><strong>ç”Ÿäº§é˜¶æ®µ</strong></td><td style="text-align:left;"><strong>ç›‘æ§ä¸ä½“éªŒ</strong></td><td style="text-align:left;">æ•è·é”™è¯¯å¹¶ä¸ŠæŠ¥è‡³ç›‘æ§å¹³å°ï¼ŒåŒæ—¶ä¸ºç”¨æˆ·å±•ç¤ºå‹å¥½æç¤ºï¼Œé¿å…ç™½å±ã€‚</td></tr></tbody></table><p><code>errorHandler</code> å‡½æ•°æ¥æ”¶ä¸‰ä¸ªå‚æ•° ï¼š</p><ol><li><code>err</code>ï¼šæ•è·åˆ°çš„é”™è¯¯å¯¹è±¡ï¼ŒåŒ…å«é”™è¯¯çš„è¯¦ç»†ä¿¡æ¯ï¼ˆå¦‚é”™è¯¯æ¶ˆæ¯ã€å †æ ˆè·Ÿè¸ªï¼‰ã€‚</li><li><code>vm</code>ï¼šè§¦å‘è¯¥é”™è¯¯çš„ Vue ç»„ä»¶å®ä¾‹ã€‚é€šè¿‡è¿™ä¸ªå®ä¾‹ï¼Œä½ å¯ä»¥è®¿é—®ç»„ä»¶çš„çŠ¶æ€ã€æ•°æ®å’Œæ–¹æ³•ï¼Œæœ‰åŠ©äºæ›´ç²¾ç¡®åœ°å®šä½é—®é¢˜ã€‚</li><li><code>info</code>ï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæä¾›äº†å…³äºé”™è¯¯å‘ç”Ÿä½ç½®æˆ–ä¸Šä¸‹æ–‡çš„ Vue ç‰¹å®šä¿¡æ¯ã€‚å¸¸è§çš„å€¼åŒ…æ‹¬ï¼š <ul><li><code>&#39;render function&#39;</code>ï¼šç»„ä»¶æ¸²æŸ“å‡½æ•°ä¸­çš„é”™è¯¯ã€‚</li><li><code>&#39;event handler&#39;</code>ï¼šäº‹ä»¶å¤„ç†å‡½æ•°ä¸­çš„é”™è¯¯ã€‚</li><li><code>&#39;mounted hook&#39;</code>ï¼š<code>mounted</code> ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­çš„é”™è¯¯ã€‚</li><li><code>&#39;setup function&#39;</code>ï¼š<code>setup</code> å‡½æ•°ä¸­çš„é”™è¯¯ã€‚</li><li><code>&#39;watcher callback&#39;</code>ï¼šä¾¦å¬å™¨å›è°ƒä¸­çš„é”™è¯¯ã€‚</li><li><code>&#39;directive hook&#39;</code>ï¼šè‡ªå®šä¹‰æŒ‡ä»¤é’©å­ä¸­çš„é”™è¯¯ã€‚</li><li><code>&#39;transition hook&#39;</code>ï¼šè¿‡æ¸¡é’©å­ä¸­çš„é”™è¯¯ã€‚</li></ul></li></ol><h3 id="é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨" tabindex="-1">é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨ <a class="header-anchor" href="#é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨" aria-label="Permalink to â€œé¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨â€">â€‹</a></h3><h4 id="_1-åŸºæœ¬é…ç½®-åœ¨-main-js-æˆ–-main-ts-ä¸­" tabindex="-1">1. åŸºæœ¬é…ç½®ï¼ˆåœ¨ <code>main.js</code> æˆ– <code>main.ts</code> ä¸­ï¼‰ <a class="header-anchor" href="#_1-åŸºæœ¬é…ç½®-åœ¨-main-js-æˆ–-main-ts-ä¸­" aria-label="Permalink to â€œ1. åŸºæœ¬é…ç½®ï¼ˆåœ¨ main.js æˆ– main.ts ä¸­ï¼‰â€">â€‹</a></h4><p>é€šå¸¸åœ¨åˆ›å»º Vue åº”ç”¨å®ä¾‹åç«‹å³é…ç½®ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>import { createApp } from &#39;vue&#39;</span></span>
<span class="line"><span>import App from &#39;./App.vue&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const app = createApp(App)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// é…ç½®å…¨å±€é”™è¯¯å¤„ç†å™¨</span></span>
<span class="line"><span>app.config.errorHandler = (err, vm, info) =&gt; {</span></span>
<span class="line"><span>  // err: æ•è·åˆ°çš„é”™è¯¯å¯¹è±¡</span></span>
<span class="line"><span>  // vm: å‘ç”Ÿé”™è¯¯çš„ç»„ä»¶å®ä¾‹ï¼ˆåœ¨ Vue 3.3+ ä¸­å¯èƒ½ä¸º nullï¼‰</span></span>
<span class="line"><span>  // info: Vue ç‰¹å®šçš„é”™è¯¯ä¿¡æ¯å­—ç¬¦ä¸²ï¼ˆå¦‚ &#39;render function&#39;, &#39;onCreated hook&#39;ï¼‰</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  // è¿™é‡Œç¼–å†™ä½ çš„é”™è¯¯å¤„ç†é€»è¾‘</span></span>
<span class="line"><span>  console.error(&#39;Global error caught:&#39;, err)</span></span>
<span class="line"><span>  console.log(&#39;Error in component:&#39;, vm)</span></span>
<span class="line"><span>  console.log(&#39;Error origin:&#39;, info)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>app.mount(&#39;#app&#39;)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="_2-å¼€å‘é˜¶æ®µ-development" tabindex="-1">2. å¼€å‘é˜¶æ®µï¼ˆDevelopmentï¼‰ <a class="header-anchor" href="#_2-å¼€å‘é˜¶æ®µ-development" aria-label="Permalink to â€œ2. å¼€å‘é˜¶æ®µï¼ˆDevelopmentï¼‰â€">â€‹</a></h4><p>åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œ<code>errorHandler</code> çš„æ ¸å¿ƒä½œç”¨æ˜¯<strong>è¾…åŠ©è°ƒè¯•</strong>ã€‚</p><ul><li><strong>è¯¦ç»†è¾“å‡º</strong>ï¼šåœ¨æ§åˆ¶å°æ‰“å°å®Œæ•´çš„é”™è¯¯ä¿¡æ¯ã€ç»„ä»¶å®ä¾‹å’Œé”™è¯¯æ¥æºï¼ˆ<code>info</code>ï¼‰ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®šä½é—®é¢˜æ‰€åœ¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­ã€æ¸²æŸ“å‡½æ•°æˆ–è®¡ç®—å±æ€§ç­‰ã€‚</li><li><strong>ä¸ DevTools ååŒ</strong>ï¼šç»“åˆ Vue DevTools è¿›è¡Œæ·±åº¦è°ƒè¯•ã€‚<code>errorHandler</code> æä¾›äº†é”™è¯¯å‘ç”Ÿçš„ä¸Šä¸‹æ–‡ï¼Œè€Œ DevTools å¯ä»¥å¸®åŠ©ä½ æ£€æŸ¥ç»„ä»¶æ ‘ã€çŠ¶æ€å’Œäº‹ä»¶ã€‚</li></ul><h4 id="_3-ç”Ÿäº§é˜¶æ®µ-production" tabindex="-1">3. ç”Ÿäº§é˜¶æ®µï¼ˆProductionï¼‰ <a class="header-anchor" href="#_3-ç”Ÿäº§é˜¶æ®µ-production" aria-label="Permalink to â€œ3. ç”Ÿäº§é˜¶æ®µï¼ˆProductionï¼‰â€">â€‹</a></h4><p>æ„å»ºä¸Šçº¿åï¼Œ<code>errorHandler</code> çš„è§’è‰²è½¬å˜ä¸º<strong>åº”ç”¨ç›‘æ§å’Œç”¨æˆ·ä½“éªŒå®ˆæŠ¤è€…</strong>ã€‚</p><ul><li><p><strong>é”™è¯¯ä¸ŠæŠ¥ (Crucial)</strong>ï¼šè¿™æ˜¯ç”Ÿäº§ç¯å¢ƒæœ€é‡è¦çš„åŠŸèƒ½ã€‚å°†æ•è·çš„é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚ <code>err.message</code>, <code>err.stack</code>, <code>info</code>ï¼‰å‘é€åˆ°ä½ çš„ç›‘æ§å¹³å°ï¼ˆå¦‚ <strong>Sentry</strong>, <strong>Fundebug</strong>, æˆ–è‡ªå»ºæœåŠ¡ï¼‰ã€‚è¿™èƒ½è®©ä½ åŠæ—¶å‘ç°å¹¶ä¿®å¤çº¿ä¸Šé—®é¢˜ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>app.config.errorHandler = (err, vm, info) =&gt; {</span></span>
<span class="line"><span>  // ç¤ºä¾‹ï¼šä¸ŠæŠ¥é”™è¯¯åˆ° Sentryï¼ˆéœ€å…ˆé›†æˆ Sentry SDKï¼‰</span></span>
<span class="line"><span>  if (window.$sentry) {</span></span>
<span class="line"><span>    window.$sentry.captureException(err, {</span></span>
<span class="line"><span>      tags: { component: vm?.$options.name, error_info: info }</span></span>
<span class="line"><span>    })</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  // æˆ–è€…ä¸ŠæŠ¥åˆ°ä½ è‡ªå·±çš„æ—¥å¿—æœåŠ¡</span></span>
<span class="line"><span>  myErrorReportingService.log(err, vm, info)</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li><li><p><strong>å‹å¥½çš„ç”¨æˆ·åé¦ˆ</strong>ï¼šé¿å…è®©ç”¨æˆ·çœ‹åˆ°å´©æºƒçš„ç™½å±æˆ–æ§åˆ¶å°é”™è¯¯ã€‚å¯ä»¥å±•ç¤ºä¸€ä¸ªå‹å¥½çš„é”™è¯¯æç¤ºç»„ä»¶æˆ–æ¶ˆæ¯ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>import { showGlobalErrorToast } from &#39;./utils/feedback&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>app.config.errorHandler = (err, vm, info) =&gt; {</span></span>
<span class="line"><span>  // ... é”™è¯¯ä¸ŠæŠ¥é€»è¾‘ ...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  // æç¤ºç”¨æˆ·</span></span>
<span class="line"><span>  showGlobalErrorToast(&#39;æŠ±æ­‰ï¼Œåº”ç”¨å‡ºäº†ç‚¹å°é—®é¢˜ã€‚è¯·ç¨åé‡è¯•æˆ–è”ç³»æ”¯æŒã€‚&#39;)</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul><h4 id="_4-åŒºåˆ†ç¯å¢ƒé…ç½®" tabindex="-1">4. åŒºåˆ†ç¯å¢ƒé…ç½® <a class="header-anchor" href="#_4-åŒºåˆ†ç¯å¢ƒé…ç½®" aria-label="Permalink to â€œ4. åŒºåˆ†ç¯å¢ƒé…ç½®â€">â€‹</a></h4><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæ ¹æ®ç¯å¢ƒå˜é‡æ¥è°ƒæ•´ <code>errorHandler</code> çš„è¡Œä¸ºã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>app.config.errorHandler = (err, vm, info) =&gt; {</span></span>
<span class="line"><span>  // 1. é”™è¯¯ä¸ŠæŠ¥ï¼šç”Ÿäº§å’Œå¼€å‘ç¯å¢ƒéƒ½å¯èƒ½éœ€è¦ï¼Œä½†ä¸ŠæŠ¥çš„è¯¦ç»†ç¨‹åº¦æˆ–ç›®æ ‡å¯èƒ½ä¸åŒ</span></span>
<span class="line"><span>  if (import.meta.env.PROD) {</span></span>
<span class="line"><span>    // ç”Ÿäº§ç¯å¢ƒï¼šä¸ŠæŠ¥åˆ°æ­£å¼çš„ç›‘æ§å¹³å°</span></span>
<span class="line"><span>    myProductionErrorService.report(err, vm, info)</span></span>
<span class="line"><span>  } else {</span></span>
<span class="line"><span>    // å¼€å‘ç¯å¢ƒï¼šå¯èƒ½åªè®°å½•åˆ°æ§åˆ¶å°ï¼Œæˆ–ä¸ŠæŠ¥åˆ°æµ‹è¯•ç¯å¢ƒ</span></span>
<span class="line"><span>    console.error(&#39;Dev Error:&#39;, err, info)</span></span>
<span class="line"><span>    myDevErrorService.log(err) // å¯é€‰</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  // 2. ç”¨æˆ·ç•Œé¢åé¦ˆï¼šé€šå¸¸åªåœ¨ç”Ÿäº§ç¯å¢ƒå±•ç¤ºå‹å¥½æç¤ºï¼Œé¿å…å¹²æ‰°å¼€å‘è°ƒè¯•</span></span>
<span class="line"><span>  if (import.meta.env.PROD) {</span></span>
<span class="line"><span>    showUserFriendlyErrorMessage()</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="âš ï¸-æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§" tabindex="-1">âš ï¸ æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§ <a class="header-anchor" href="#âš ï¸-æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§" aria-label="Permalink to â€œâš ï¸ æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§â€">â€‹</a></h3><ol><li><p><strong>å¹¶éâ€œä¸‡èƒ½â€</strong>ï¼š<code>app.config.errorHandler</code> ä¸»è¦æ•è·çš„æ˜¯ï¼š Vue ç»„ä»¶æ¸²æŸ“å‡½æ•°ä¸­çš„é”™è¯¯ è§‚å¯Ÿè€…ï¼ˆWatcherï¼‰å›è°ƒå‡½æ•°ä¸­çš„é”™è¯¯ ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­çš„é”™è¯¯ è‡ªå®šä¹‰æŒ‡ä»¤é’©å­ä¸­çš„é”™è¯¯ <code>setup()</code> å‡½æ•°ä¸­çš„é”™è¯¯</p></li><li><p><strong>æ— æ³•æ•è·ä»¥ä¸‹é”™è¯¯</strong>ï¼š</p><ul><li><strong>äº‹ä»¶å¤„ç†å‡½æ•°å†…éƒ¨çš„å¼‚æ­¥é”™è¯¯</strong>ï¼ˆå¦‚ <code>setTimeout</code>, <code>Promise</code> å†…çš„é”™è¯¯ï¼‰ã€‚</li><li><strong>å…¨å±€äº‹ä»¶ç›‘å¬å™¨</strong>ï¼ˆå¦‚é€šè¿‡ <code>window.addEventListener</code> æ·»åŠ çš„ï¼‰ä¸­çš„é”™è¯¯ã€‚</li><li><strong>å¼‚æ­¥å›è°ƒ</strong>ï¼ˆå¦‚ <code>setTimeout</code>ã€<code>setInterval</code>ã€<code>Promise</code> çš„ <code>then</code>/catch é“¾ä¸­æœªè¢«å¤„ç†çš„é”™è¯¯ï¼‰é€šå¸¸éœ€è¦ <code>window.onunhandledrejection</code> æ¥æ•è·ã€‚</li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>// éœ€è¦å•ç‹¬å¤„ç†å¼‚æ­¥é”™è¯¯</span></span>
<span class="line"><span>window.addEventListener(&#39;unhandledrejection&#39;, (event) =&gt; {</span></span>
<span class="line"><span>  console.error(&#39;Unhandled Promise rejection:&#39;, event.reason)</span></span>
<span class="line"><span>  // åŒæ ·å¯ä»¥åœ¨è¿™é‡Œä¸ŠæŠ¥é”™è¯¯</span></span>
<span class="line"><span>})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p><strong>ä¸ <code>errorCaptured</code> çš„å…³ç³»</strong>ï¼šç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­ <code>errorCaptured</code> å¯ä»¥æ•è·å…¶å­å­™ç»„ä»¶ä¸­å‘ç”Ÿçš„é”™è¯¯ã€‚å®ƒå¯ä»¥å†³å®šæ˜¯å¦é˜»æ­¢é”™è¯¯ç»§ç»­å‘ä¸Šå†’æ³¡åˆ°å…¨å±€çš„ <code>errorHandler</code>ï¼ˆé€šè¿‡è¿”å› <code>false</code>ï¼‰ã€‚</p></li><li><p><strong>é¿å…åœ¨ <code>errorHandler</code> ä¸­æŠ›å‡ºé”™è¯¯</strong>ï¼šç¡®ä¿ä½ çš„é”™è¯¯å¤„ç†å™¨æœ¬èº«éå¸¸å¥å£®ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´æ— é™å¾ªç¯ã€‚</p></li></ol><h3 id="ğŸ’¡-è¿›é˜¶ç”¨æ³•-ç»“åˆé”™è¯¯è¾¹ç•Œ-error-boundary" tabindex="-1">ğŸ’¡ è¿›é˜¶ç”¨æ³•ï¼šç»“åˆé”™è¯¯è¾¹ç•Œ (Error Boundary) <a class="header-anchor" href="#ğŸ’¡-è¿›é˜¶ç”¨æ³•-ç»“åˆé”™è¯¯è¾¹ç•Œ-error-boundary" aria-label="Permalink to â€œğŸ’¡ è¿›é˜¶ç”¨æ³•ï¼šç»“åˆé”™è¯¯è¾¹ç•Œ (Error Boundary)â€">â€‹</a></h3><p>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œä½ å¯ä»¥è€ƒè™‘å®ç°ç±»ä¼¼ React çš„â€œé”™è¯¯è¾¹ç•Œâ€æ¦‚å¿µã€‚å³åˆ›å»ºä¸€ä¸ªä¸“ç”¨ç»„ä»¶ï¼Œåˆ©ç”¨ <code>errorCaptured</code> é’©å­æ•è·å…¶æ•´ä¸ªå­æ ‘å†…çš„é”™è¯¯ï¼Œå¹¶åœ¨ç»„ä»¶å†…éƒ¨ä¼˜é›…åœ°é™çº§æ˜¾ç¤ºï¼Œè€Œä¸æ˜¯è®©æ•´ä¸ªåº”ç”¨å´©æºƒæˆ–æ¯æ¬¡éƒ½è§¦å‘å…¨å±€å¤„ç†ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;!-- ErrorBoundary.vue --&gt;</span></span>
<span class="line"><span>&lt;template&gt;</span></span>
<span class="line"><span>  &lt;div v-if=&quot;hasError&quot;&gt;</span></span>
<span class="line"><span>    &lt;h2&gt;Something went wrong in this section.&lt;/h2&gt;</span></span>
<span class="line"><span>    &lt;button @click=&quot;tryToRecover&quot;&gt;Try Again&lt;/button&gt;</span></span>
<span class="line"><span>    &lt;!-- å¯å±•ç¤ºè¯¦ç»†çš„å‹å¥½é”™è¯¯ä¿¡æ¯ --&gt;</span></span>
<span class="line"><span>  &lt;/div&gt;</span></span>
<span class="line"><span>  &lt;slot v-else&gt;&lt;/slot&gt;</span></span>
<span class="line"><span>&lt;/template&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;script setup&gt;</span></span>
<span class="line"><span>import { ref, onErrorCaptured } from &#39;vue&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const hasError = ref(false)</span></span>
<span class="line"><span>const error = ref(null)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>onErrorCaptured((err, instance, info) =&gt; {</span></span>
<span class="line"><span>  error.value = err</span></span>
<span class="line"><span>  hasError.value = true</span></span>
<span class="line"><span>  // å¯ä»¥åœ¨è¿™é‡Œä¸ŠæŠ¥è¯¥è¾¹ç•Œå†…çš„é”™è¯¯</span></span>
<span class="line"><span>  myErrorReportingService.log(err, instance, info)</span></span>
<span class="line"><span>  // é˜»æ­¢é”™è¯¯ç»§ç»­å†’æ³¡åˆ°å…¨å±€ handlerï¼Œå®ç°å±€éƒ¨é™çº§</span></span>
<span class="line"><span>  return false</span></span>
<span class="line"><span>})</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function tryToRecover() {</span></span>
<span class="line"><span>  hasError.value = false</span></span>
<span class="line"><span>  error.value = null</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>&lt;/script&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>ç„¶ååœ¨å¯èƒ½å‡ºé”™çš„ç»„ä»¶å¤–å›´ä½¿ç”¨å®ƒï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;ErrorBoundary&gt;</span></span>
<span class="line"><span>  &lt;UnstableComponent /&gt;</span></span>
<span class="line"><span>&lt;/ErrorBoundary&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="ğŸ’-æ€»ç»“" tabindex="-1">ğŸ’ æ€»ç»“ <a class="header-anchor" href="#ğŸ’-æ€»ç»“" aria-label="Permalink to â€œğŸ’ æ€»ç»“â€">â€‹</a></h3><p><code>app.config.errorHandler</code> åœ¨æ­£å¸¸é¡¹ç›®ä¸­<strong>è‚¯å®šä¼šä½¿ç”¨</strong>ï¼Œå®ƒæ˜¯ Vue åº”ç”¨é”™è¯¯å¤„ç†ä½“ç³»çš„åŸºçŸ³ã€‚</p><ul><li><strong>å¼€å‘æ—¶</strong>ï¼šå®ƒæ˜¯ä½ <strong>è°ƒè¯•çš„å¾—åŠ›åŠ©æ‰‹</strong>ï¼Œé€šè¿‡æ§åˆ¶å°è¾“å‡ºç²¾å‡†å®šä½é—®é¢˜ã€‚</li><li><strong>æ„å»ºå</strong>ï¼šå®ƒæ˜¯åº”ç”¨çš„<strong>å®‰å…¨ç½‘å’Œå“¨å…µ</strong>ï¼Œè´Ÿè´£æ•è·æœªé¢„æ–™é”™è¯¯ã€ä¸ŠæŠ¥æ—¥å¿—ã€å¹¶ä¼˜é›…åœ°é€šçŸ¥ç”¨æˆ·ã€‚</li></ul><p>æœ€ä½³å®è·µæ˜¯ï¼š<strong>å°†å…¶ä¸ <code>window.onunhandledrejection</code>ã€ç»„ä»¶çº§çš„ <code>errorCaptured</code> æˆ–â€œé”™è¯¯è¾¹ç•Œâ€ã€ä»¥åŠå¼‚æ­¥æ“ä½œä¸­çš„ <code>try/catch</code> ç»“åˆèµ·æ¥</strong>ï¼Œæ„å»ºä¸€ä¸ªå¤šå±‚æ¬¡ã€å…¨æ–¹ä½çš„é”™è¯¯å¤„ç†é˜²å¾¡ç³»ç»Ÿï¼Œä»è€Œæå¤§æå‡åº”ç”¨çš„å¥å£®æ€§å’Œç”¨æˆ·ä½“éªŒã€‚</p><h2 id="_3-props-æŠ€å·§" tabindex="-1">3.props æŠ€å·§ <a class="header-anchor" href="#_3-props-æŠ€å·§" aria-label="Permalink to â€œ3.props æŠ€å·§â€">â€‹</a></h2><p>1.åŒåç®€å†™ ä»…æ”¯æŒ 3.4 ç‰ˆæœ¬åŠä»¥ä¸Š å¦‚æœ attribute çš„åç§°ä¸ç»‘å®šçš„ JavaScript å˜é‡çš„åç§°ç›¸åŒï¼Œé‚£ä¹ˆå¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–è¯­æ³•ï¼Œçœç•¥ attribute å€¼ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;!-- ä¸ :id=&quot;id&quot; ç›¸åŒ --&gt;</span></span>
<span class="line"><span>&lt;div :id&gt;&lt;/div&gt;</span></span>
<span class="line"><span>&lt;!-- è¿™ä¹ŸåŒæ ·æœ‰æ•ˆ --&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;div v-bind:id&gt;&lt;/div&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è¿™ä¸åœ¨ JavaScript ä¸­å£°æ˜å¯¹è±¡æ—¶ä½¿ç”¨çš„å±æ€§ç®€å†™è¯­æ³•ç±»ä¼¼ã€‚è¯·æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªåªåœ¨ Vue 3.4 åŠä»¥ä¸Šç‰ˆæœ¬ä¸­å¯ç”¨çš„ç‰¹æ€§ã€‚</p><p>2.åŠ¨æ€ç»‘å®šå¤šä¸ªå€¼ å¦‚æœä½ æœ‰åƒè¿™æ ·çš„ä¸€ä¸ªåŒ…å«å¤šä¸ª attribute çš„ JavaScript å¯¹è±¡ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>const objectOfAttrs = {</span></span>
<span class="line"><span>  id: &#39;container&#39;,</span></span>
<span class="line"><span>  class: &#39;wrapper&#39;,</span></span>
<span class="line"><span>  style: &#39;background-color:green&#39;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>é€šè¿‡ä¸å¸¦å‚æ•°çš„ v-bindï¼Œä½ å¯ä»¥å°†å®ƒä»¬ç»‘å®šåˆ°å•ä¸ªå…ƒç´ ä¸Šï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;div v-bind=&quot;objectOfAttrs&quot;&gt;&lt;/div&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä½†æ˜¯è¿™æ ·ä½¿ç”¨å…¶å®æœ‰ä¸€äº›å‘</p><p>1.ref æ— æ³•è‡ªåŠ¨è§£æ„ï¼Œå¦‚æœä½ ä¼ è¿›å»çš„æ—¶å€™æ˜¯å¯¹è±¡</p><p>å¦‚æœä½ ä½¿ç”¨</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Child </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./child.vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> var1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> var2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> childProps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  prop1: var1,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  prop2: var2,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;You did it!&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- &lt;child :prop1=&quot;var1&quot; :prop2=&quot;var2&quot; /&gt; --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">child</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;childProps&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;var1++&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Click me&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;var2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scoped</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>é‚£ä¹ˆç»“æœæ˜¯ï¼š</p><p>å¹¶æ²¡æœ‰å¸®ä½ è‡ªåŠ¨è§£æ„ä½ ä¼ è¿›å»çš„ ref</p><p>ä½ å¯ä»¥é€šè¿‡</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>const childProps = reactive({</span></span>
<span class="line"><span>  prop1: var1,</span></span>
<span class="line"><span>  prop2: var2,</span></span>
<span class="line"><span>});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>æ¥é¡ºåˆ©è§£å†³</p><p>2.dom å±æ€§ä¼šè¢«è‡ªåŠ¨ç»‘å®š</p><p><strong>DOM å±æ€§ vs HTML å±æ€§</strong> å¯¹è±¡é‡Œå¦‚æœå‡ºç° <code>value: 123</code>ã€<code>checked: true</code>ã€<code>indeterminate: true</code> è¿™ç±»<strong>åªæœ‰ DOM å±æ€§æ‰è®¤</strong>çš„å­—æ®µï¼Œä¼šè¢« Vue å½“æˆ <strong>HTML attribute</strong> å†™è¿›å»ï¼Œç»“æœå­—ç¬¦ä¸²åŒ–åå¤±çµã€‚ è§£å†³ï¼šåœ¨å¯¹è±¡é‡Œç”¨ <code>valueProp</code>ã€<code>checkedProp</code> ç­‰åå­—ï¼Œå†å•ç‹¬ <code>:value.prop=&quot;obj.valueProp&quot;</code>ï¼›æˆ–æŠŠå¯¹è±¡æ‹†æˆ <code>domProps</code> / <code>attr</code> ä¸¤ä¸ªå¯¹è±¡ã€‚</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Child </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./child.vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> var1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> var2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// const childProps = reactive({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   prop1: var1,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   prop2: var2,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> childProps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  prop1: var1,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  prop2: var2,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;You did it!&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- &lt;child :prop1=&quot;var1&quot; :prop2=&quot;var2&quot; /&gt; --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">child</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;childProps&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;var1++&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Click me&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;var2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scoped</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div>`,62)])])}const b=n(p,[["render",l]]);export{k as __pageData,b as default};
